!function(n){"use strict";function e(){}function r(n){return function(){return n}}function t(){return f}var o,i=function(n){function e(){return r}var r=n;return{get:e,set:function(n){r=n},clone:function(){return i(e())}}},u=tinymce.util.Tools.resolve("tinymce.PluginManager"),c=function(n){return{isFullscreen:function(){return null!==n.get()}}},s=r(!1),a=r(!0),f=(o={fold:function(n,e){return n()},is:s,isSome:s,isNone:a,getOr:m,getOrThunk:d,getOrDie:function(n){throw new Error(n||"error: getOrDie called on none.")},getOrNull:r(null),getOrUndefined:r(void 0),or:m,orThunk:d,map:t,each:e,bind:t,exists:s,forall:a,filter:t,equals:l,equals_:l,toArray:function(){return[]},toString:r("none()")},Object.freeze&&Object.freeze(o),o);function l(n){return n.isNone()}function d(n){return n()}function m(n){return n}function h(){return function(n){function e(){r.get().each(n)}var r=i(z.none());return{clear:function(){e(),r.set(z.none())},isSet:function(){return r.get().isSome()},set:function(n){e(),r.set(z.some(n))}}}((function(n){n.unbind()}))}function v(n){return function(e){return function(n){if(null===n)return"null";var e=typeof n;return"object"==e&&(Array.prototype.isPrototypeOf(n)||n.constructor&&"Array"===n.constructor.name)?"array":"object"==e&&(String.prototype.isPrototypeOf(n)||n.constructor&&"String"===n.constructor.name)?"string":e}(e)===n}}function g(n,e){for(var r=n.length,t=new Array(r),o=0;o<r;o++){var i=n[o];t[o]=e(i,o)}return t}function p(n,e){for(var r=0,t=n.length;r<t;r++)e(n[r],r)}function w(n,e){for(var r=[],t=0,o=n.length;t<o;t++){var i=n[t];e(i,t)&&r.push(i)}return r}function y(n,e){return function(n){for(var e=[],r=0,t=n.length;r<t;++r){if(!G(n[r]))throw new Error("Arr.flatten item "+r+" was not an array, input: "+n);Q.apply(e,n[r])}return e}(g(n,e))}function S(n,e){return-1!==n.indexOf(e)}function O(n){return void 0!==n.style&&K(n.style.getPropertyValue)}function E(e,r,t){!function(e,r,t){if(!(Y(t)||$(t)||J(t)))throw n.console.error("Invalid call to Attr.set. Key ",r,":: Value ",t,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(r,t+"")}(e.dom(),r,t)}function x(n,e){var r=n.dom().getAttribute(e);return null===r?void 0:r}function T(n,e){n.dom().removeAttribute(e)}function N(e,r){var t=e.dom();!function(n,e){for(var r=Z(n),t=0,o=r.length;t<o;t++){var i=r[t];e(n[i],i)}}(r,(function(e,r){!function(e,r,t){if(!Y(t))throw n.console.error("Invalid call to CSS.set. Property ",r,":: Value ",t,":: Element ",e),new Error("CSS value must be a string: "+t);O(e)&&e.style.setProperty(r,t)}(t,r,e)}))}function b(e,r){var t=e.dom(),o=n.window.getComputedStyle(t).getPropertyValue(r),i=""!==o||function(n){var e=un(n)?n.dom().parentNode:n.dom();return void 0!==e&&null!==e&&e.ownerDocument.body.contains(e)}(e)?o:cn(t,r);return null===i?void 0:i}function C(n){function e(){n.stopPropagation()}function t(){n.preventDefault()}var o=en.fromDom(n.target),i=function(n,e){return function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];return n(e.apply(null,r))}}(t,e);return function(n,e,t,o,i,u,c){return{target:r(n),x:r(e),y:r(t),stop:o,prevent:i,kill:u,raw:r(c)}}(o,n.clientX,n.clientY,e,t,i,n)}function D(n,e){var r=function(n,e){for(var r=0;r<n.length;r++){var t=n[r];if(t.test(e))return t}}(n,e);if(!r)return{major:0,minor:0};function t(n){return Number(e.replace(r,"$"+n))}return an(t(1),t(2))}function A(n,e){return function(){return e===n}}function k(n,e){return function(){return e===n}}function M(n,e){var r=String(e).toLowerCase();return function(n,e){for(var r=0,t=n.length;r<t;r++){var o=n[r];if(e(o,r))return z.some(o)}return z.none()}(n,(function(n){return n.search(r)}))}function F(n){return function(e){return S(e,n)}}function _(){return Cn.get()}function R(n,e){var r=n.dom();if(r.nodeType!==Dn)return!1;var t=r;if(void 0!==t.matches)return t.matches(e);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(e);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(e);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}function L(e,r){var t=void 0===r?n.document:r.dom();return function(n){return n.nodeType!==Dn&&n.nodeType!==An||0===n.childElementCount}(t)?[]:g(t.querySelectorAll(e),en.fromDom)}function P(n){return function(n){return z.from(n.dom().parentNode).map(en.fromDom)}(n).map(kn).map((function(e){return w(e,(function(e){return!function(n,e){return n.dom()===e.dom()}(n,e)}))})).getOr([])}function I(e){var r=void 0===e?n.window:e;return z.from(r.visualViewport)}function H(n,e,t,o){return{x:r(n),y:r(e),width:r(t),height:r(o),right:r(n+t),bottom:r(e+o)}}function W(e){var r=void 0===e?n.window:e,t=r.document,o=function(e){var r=void 0!==e?e.dom():n.document,t=r.body.scrollLeft||r.documentElement.scrollLeft,o=r.body.scrollTop||r.documentElement.scrollTop;return Fn(t,o)}(en.fromDom(t));return I(r).fold((function(){var n=r.document.documentElement,e=n.clientWidth,t=n.clientHeight;return H(o.left(),o.top(),e,t)}),(function(n){return H(Math.max(n.pageLeft,o.left()),Math.max(n.pageTop,o.top()),n.width,n.height)}))}function U(n,r,t){return I(t).map((function(e){function r(n){return C(n)}return e.addEventListener(n,r),{unbind:function(){return e.removeEventListener(n,r)}}})).getOrThunk((function(){return{unbind:e}}))}function j(n,e,r){return w(function(n,e){for(var r=K(e)?e:s,t=n.dom(),o=[];null!==t.parentNode&&void 0!==t.parentNode;){var i=t.parentNode,u=en.fromDom(i);if(o.push(u),!0===r(u))break;t=i}return o}(n,r),e)}function B(n,e){return function(n,e){return w(P(n),e)}(n,(function(n){return R(n,e)}))}function V(n,e){return function(r){function t(n){return r.setActive(n.state)}return r.setActive(null!==e.get()),n.on("FullscreenStateChanged",t),function(){return n.off("FullscreenStateChanged",t)}}}var q,X=function(n){function e(){return i}function t(e){return e(n)}var o=r(n),i={fold:function(e,r){return r(n)},is:function(e){return n===e},isSome:a,isNone:s,getOr:o,getOrThunk:o,getOrDie:o,getOrNull:o,getOrUndefined:o,or:e,orThunk:e,map:function(e){return X(e(n))},each:function(e){e(n)},bind:t,exists:t,forall:t,filter:function(e){return e(n)?i:f},toArray:function(){return[n]},toString:function(){return"some("+n+")"},equals:function(e){return e.is(n)},equals_:function(e,r){return e.fold(s,(function(e){return r(n,e)}))}};return i},z={some:X,none:t,from:function(n){return null===n||void 0===n?f:X(n)}},Y=v("string"),G=v("array"),$=v("boolean"),K=v("function"),J=v("number"),Q=(Array.prototype.slice,Array.prototype.push),Z=(K(Array.from)&&Array.from,Object.keys),nn=function(n){if(null===n||void 0===n)throw new Error("Node cannot be null or undefined");return{dom:r(n)}},en={fromHtml:function(e,r){var t=(r||n.document).createElement("div");if(t.innerHTML=e,!t.hasChildNodes()||1<t.childNodes.length)throw n.console.error("HTML does not have a single root node",e),new Error("HTML must have a single root node");return nn(t.childNodes[0])},fromTag:function(e,r){var t=(r||n.document).createElement(e);return nn(t)},fromText:function(e,r){var t=(r||n.document).createTextNode(e);return nn(t)},fromDom:nn,fromPoint:function(n,e,r){var t=n.dom();return z.from(t.elementFromPoint(e,r)).map(nn)}},rn=(n.Node.ATTRIBUTE_NODE,n.Node.CDATA_SECTION_NODE,n.Node.COMMENT_NODE,n.Node.DOCUMENT_NODE),tn=(n.Node.DOCUMENT_TYPE_NODE,n.Node.DOCUMENT_FRAGMENT_NODE,n.Node.ELEMENT_NODE),on=n.Node.TEXT_NODE,un=(n.Node.PROCESSING_INSTRUCTION_NODE,n.Node.ENTITY_REFERENCE_NODE,n.Node.ENTITY_NODE,n.Node.NOTATION_NODE,"undefined"!=typeof n.window?n.window:Function("return this;")(),q=on,function(n){return function(n){return n.dom().nodeType}(n)===q}),cn=function(n,e){return O(n)?n.style.getPropertyValue(e):""},sn=function(){return an(0,0)},an=function(n,e){return{major:n,minor:e}},fn={nu:an,detect:function(n,e){var r=String(e).toLowerCase();return 0===n.length?sn():D(n,r)},unknown:sn},ln="Firefox",dn=function(n){var e=n.current;return{current:e,version:n.version,isEdge:A("Edge",e),isChrome:A("Chrome",e),isIE:A("IE",e),isOpera:A("Opera",e),isFirefox:A(ln,e),isSafari:A("Safari",e)}},mn={unknown:function(){return dn({current:void 0,version:fn.unknown()})},nu:dn,edge:r("Edge"),chrome:r("Chrome"),ie:r("IE"),opera:r("Opera"),firefox:r(ln),safari:r("Safari")},hn="Windows",vn="Android",gn="Solaris",pn="FreeBSD",wn="ChromeOS",yn=function(n){var e=n.current;return{current:e,version:n.version,isWindows:k(hn,e),isiOS:k("iOS",e),isAndroid:k(vn,e),isOSX:k("OSX",e),isLinux:k("Linux",e),isSolaris:k(gn,e),isFreeBSD:k(pn,e),isChromeOS:k(wn,e)}},Sn={unknown:function(){return yn({current:void 0,version:fn.unknown()})},nu:yn,windows:r(hn),ios:r("iOS"),android:r(vn),linux:r("Linux"),osx:r("OSX"),solaris:r(gn),freebsd:r(pn),chromeos:r(wn)},On=function(n,e){return M(n,e).map((function(n){var r=fn.detect(n.versionRegexes,e);return{current:n.name,version:r}}))},En=function(n,e){return M(n,e).map((function(n){var r=fn.detect(n.versionRegexes,e);return{current:n.name,version:r}}))},xn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Tn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(n){return S(n,"edge/")&&S(n,"chrome")&&S(n,"safari")&&S(n,"applewebkit")}},{name:"Chrome",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,xn],search:function(n){return S(n,"chrome")&&!S(n,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(n){return S(n,"msie")||S(n,"trident")}},{name:"Opera",versionRegexes:[xn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:F("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:F("firefox")},{name:"Safari",versionRegexes:[xn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(n){return(S(n,"safari")||S(n,"mobile/"))&&S(n,"applewebkit")}}],Nn=[{name:"Windows",search:F("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(n){return S(n,"iphone")||S(n,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:F("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:F("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:F("linux"),versionRegexes:[]},{name:"Solaris",search:F("sunos"),versionRegexes:[]},{name:"FreeBSD",search:F("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:F("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],bn={browsers:r(Tn),oses:r(Nn)},Cn=i(function(n,e){var t=bn.browsers(),o=bn.oses(),i=On(t,n).fold(mn.unknown,mn.nu),u=En(o,n).fold(Sn.unknown,Sn.nu);return{browser:i,os:u,deviceType:function(n,e,t,o){var i=n.isiOS()&&!0===/ipad/i.test(t),u=n.isiOS()&&!i,c=n.isiOS()||n.isAndroid(),s=c||o("(pointer:coarse)"),a=i||!u&&c&&o("(min-device-width:768px)"),f=u||c&&!a,l=e.isSafari()&&n.isiOS()&&!1===/safari/i.test(t),d=!f&&!a&&!l;return{isiPad:r(i),isiPhone:r(u),isTablet:r(a),isPhone:r(f),isTouch:r(s),isAndroid:n.isAndroid,isiOS:n.isiOS,isWebView:r(l),isDesktop:r(d)}}(u,i,n,e)}}(n.navigator.userAgent,(function(e){return n.window.matchMedia(e).matches}))),Dn=tn,An=rn,kn=(_().browser.isIE(),function(n){return g(n.dom().childNodes,en.fromDom)}),Mn=(function(){for(var n=[],e=0;e<arguments.length;e++)n[e]=arguments[e]}("element","offset"),function(n,e){return{left:r(n),top:r(e),translate:function(r,t){return Mn(n+r,e+t)}}}),Fn=Mn,_n=(_().browser.isSafari(),tinymce.util.Tools.resolve("tinymce.dom.DOMUtils")),Rn=tinymce.util.Tools.resolve("tinymce.Env"),Ln=tinymce.util.Tools.resolve("tinymce.util.Delay"),Pn=function(n,e){n.fire("FullscreenStateChanged",{state:e})},In="data-ephox-mobile-fullscreen-style",Hn="position:absolute!important;",Wn="top:0!important;left:0!important;margin:0!important;padding:0!important;width:100%!important;height:100%!important;overflow:visible!important;",Un=Rn.os.isAndroid(),jn=function(n,e,r){function t(e){return function(r){var t=x(r,"style"),o=void 0===t?"no-styles":t.trim();o!==e&&(E(r,In,o),N(r,n.parseStyle(e)))}}var o=function(n,e,r){return j(n,(function(n){return R(n,e)}),r)}(e,"*"),i=y(o,(function(n){return B(n,"*:not(.tox-silver-sink)")})),u=function(n){var e=b(n,"background-color");return void 0!==e&&""!==e?"background-color:"+e+"!important":"background-color:rgb(255,255,255)!important;"}(r);p(i,t("display:none!important;")),p(o,t(Hn+Wn+u)),t((!0===Un?"":Hn)+Wn+u)(e)},Bn=function(n){var e=function(n){return L(n)}("["+In+"]");p(e,(function(e){var r=x(e,In);"no-styles"!==r?N(e,n.parseStyle(r)):T(e,"style"),T(e,In)}))},Vn=_n.DOM,qn=I().fold((function(){return{bind:e,unbind:e}}),(function(e){var r=function(){var n=i(z.none());return{clear:function(){n.set(z.none())},set:function(e){n.set(z.some(e))},isSet:function(){return n.get().isSome()},on:function(e){n.get().each(e)}}}(),t=h(),o=h(),u=Ln.throttle((function(){n.document.body.scrollTop=0,n.document.documentElement.scrollTop=0,n.window.requestAnimationFrame((function(){r.on((function(n){return N(n,{top:e.offsetTop+"px",left:e.offsetLeft+"px",height:e.height+"px",width:e.width+"px"})}))}))}),50);return{bind:function(n){r.set(n),u(),t.set(U("resize")),o.set(U("scroll"))},unbind:function(){r.on((function(){t.clear(),o.clear()})),r.clear()}}})),Xn=function(e,r){var t,o,i,u=n.document.body,c=n.document.documentElement;o=e.getContainer();var s=en.fromDom(o),a=r.get(),f=en.fromDom(e.getBody()),l=Rn.deviceType.isTouch();if(t=o.style,i=e.getContentAreaContainer().firstChild.style,a)i.width=a.iframeWidth,i.height=a.iframeHeight,t.width=a.containerWidth,t.height=a.containerHeight,t.top=a.containerTop,t.left=a.containerLeft,l&&Bn(e.dom),Vn.removeClass(u,"tox-fullscreen"),Vn.removeClass(c,"tox-fullscreen"),Vn.removeClass(o,"tox-fullscreen"),function(e){n.window.scrollTo(e.x,e.y)}(a.scrollPos),r.set(null),Pn(e,!1),qn.unbind(),e.off("remove",qn.unbind);else{var d={scrollPos:function(){var e=W(n.window);return{x:e.x(),y:e.y()}}(),containerWidth:t.width,containerHeight:t.height,containerTop:t.top,containerLeft:t.left,iframeWidth:i.width,iframeHeight:i.height};l&&jn(e.dom,s,f),i.width=i.height="100%",t.width=t.height="",Vn.addClass(u,"tox-fullscreen"),Vn.addClass(c,"tox-fullscreen"),Vn.addClass(o,"tox-fullscreen"),qn.bind(s),e.on("remove",qn.unbind),r.set(d),Pn(e,!0)}},zn=function(n,e){n.addCommand("mceFullScreen",(function(){Xn(n,e)}))},Yn=function(n,e){n.ui.registry.addToggleMenuItem("fullscreen",{text:"Fullscreen",shortcut:"Meta+Shift+F",onAction:function(){return n.execCommand("mceFullScreen")},onSetup:V(n,e)}),n.ui.registry.addToggleButton("fullscreen",{tooltip:"Fullscreen",icon:"fullscreen",onAction:function(){return n.execCommand("mceFullScreen")},onSetup:V(n,e)})};!function(){u.add("fullscreen",(function(n){var e=i(null);return n.settings.inline||(zn(n,e),Yn(n,e),n.addShortcut("Meta+Shift+F","","mceFullScreen")),c(e)}))}()}(window);