!function(){"use strict";function n(n,e){for(var t="",o=0;o<e;o++)t+=n;return t}var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function(n){var e=n.getParam("nonbreaking_force_tab",0);return"boolean"==typeof e?!0===e?3:0:e},o=function(n){return n.getParam("nonbreaking_wrap",!0,"boolean")},i=function(e,t){var i=o(e)||e.plugins.visualchars?'<span class="'+(function(n){return!!n.plugins.visualchars&&n.plugins.visualchars.isEnabled()}(e)?"mce-nbsp-wrap mce-nbsp":"mce-nbsp-wrap")+'" contenteditable="false">'+n("&nbsp;",t)+"</span>":n("&nbsp;",t);e.undoManager.transact((function(){return e.insertContent(i)}))},a=function(n){n.addCommand("mceNonBreaking",(function(){i(n,1)}))},r=tinymce.util.Tools.resolve("tinymce.util.VK"),c=function(n){var e=t(n);0<e&&n.on("keydown",(function(t){if(t.keyCode===r.TAB&&!t.isDefaultPrevented()){if(t.shiftKey)return;t.preventDefault(),t.stopImmediatePropagation(),i(n,e)}}))},u=function(n){n.ui.registry.addButton("nonbreaking",{icon:"non-breaking",tooltip:"Nonbreaking space",onAction:function(){return n.execCommand("mceNonBreaking")}}),n.ui.registry.addMenuItem("nonbreaking",{icon:"non-breaking",text:"Nonbreaking space",onAction:function(){return n.execCommand("mceNonBreaking")}})};!function(){e.add("nonbreaking",(function(n){a(n),u(n),c(n)}))}()}();