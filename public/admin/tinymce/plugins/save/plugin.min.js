!function(){"use strict";function n(n,e){n.notificationManager.open({text:e,type:"error"})}function e(n){return function(e){function t(){e.setDisabled(a(n)&&!n.isDirty())}return n.on("NodeChange dirty",t),function(){return n.off("NodeChange dirty",t)}}}var t=tinymce.util.Tools.resolve("tinymce.PluginManager"),o=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),i=tinymce.util.Tools.resolve("tinymce.util.Tools"),a=function(n){return n.getParam("save_enablewhendirty",!0)},c=function(n){return!!n.getParam("save_onsavecallback")},r=function(n){return!!n.getParam("save_oncancelcallback")},u=function(e){var t;if(t=o.DOM.getParent(e.id,"form"),!a(e)||e.isDirty()){if(e.save(),c(e))return e.execCallback("save_onsavecallback",e),void e.nodeChanged();t?(e.setDirty(!1),t.onsubmit&&!t.onsubmit()||("function"==typeof t.submit?t.submit():n(e,"Error: Form submit field collision.")),e.nodeChanged()):n(e,"Error: No form element found.")}},l=function(n){var e=i.trim(n.startContent);r(n)?n.execCallback("save_oncancelcallback",n):n.resetContent(e)},s=function(n){n.addCommand("mceSave",(function(){u(n)})),n.addCommand("mceCancel",(function(){l(n)}))},d=function(n){n.ui.registry.addButton("save",{icon:"save",tooltip:"Save",disabled:!0,onAction:function(){return n.execCommand("mceSave")},onSetup:e(n)}),n.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",disabled:!0,onAction:function(){return n.execCommand("mceCancel")},onSetup:e(n)}),n.addShortcut("Meta+S","","mceSave")};!function(){t.add("save",(function(n){d(n),s(n)}))}()}();